{% block stylesheets %}
  <link href="{{ static_url('jquery-file-upload/jquery.fileupload-ui.css') }}" rel="stylesheet">
{% end %}

{% block main_container %}

<div class="tabbable" style="background:#FFFFFF; position:relative;"> 
    <!-- Tabs for different sources -->
    <ul id="tabs-list" class="nav nav-tabs" style="margin-bottom:10px;border-bottom:1px solid #DDD;position:fixed;z-index:5;width:100%;background:#fff;">
        <li class="active" id="file-tab"><a href="#file_upload" data-toggle="tab"><img src="{{static_url('icons/imac-icon.png')}}" class="add_icon" style="height:20px;margin-right:5px;"/><span>My Computer</span></a></li>
        
    </ul>
    
    <div class="tab-content" style="position:relative;top:50px;">
        <!--File upload tab. Main hero unit for a primary marketing message or call to action -->
        <div class="tab-pane active" id="file_upload">
              <div id="fileupload" >
                <form method="POST" enctype="multipart/form-data">


                  <div id = "filediv" class="fileupload-buttonbar">
		            <span class="btn btn-success fileinput-button" rel="tooltip" title="Click here to add files">
                      <span><i class="icon-plus icon-white"></i> Add files...</span>
                      <input type="file" name="files" id="files" multiple>
                    </span>            		
		            <button type="submit" class="btn btn-primary start" id="start_uploads">
                      <i class="icon-upload icon-white"></i> Upload All
                    </button>
                    <span class="alert-error" id="error_msg" style="margin-left:30px;display:none;">Please select some documents before attempting to upload</span>
                  </div>
                  
                </form>
	            <div class="fileupload-content">
	              <table id="upload_files" class="table">
	                <tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"/>
	              </table>
	              <!--<div id="fileupload-progress"></div>-->
             	</div>
              </div>
        </div>
        
        
             
    </div>
</div>
{% end %}

{% block scripts %}


  {# The jQuery UI widget factory, can be omitted if jQuery UI is already included #}
  <script src="{{ static_url("jquery-ui.js") }}"</script>
  {# The Iframe Transport is required for browsers without support for XHR file uploads #}
  <script src="{{ static_url("jquery-file-upload/jquery.iframe-transport.js") }}"></script>
  <script src="{{ static_url("jquery-file-upload/jquery.fileupload.js") }}"/></script>

  <script src="{{ static_url("jquery-file-upload/fileupload.js") }}"/></script>
  {# The Templates plugin is included to render the upload/download listings #}
  <script src="{{ static_url("jquery.tmpl.min.js")}}"></script>
  {# Javascript to enable download from the configured sources #}


  <!-- DON'T FORGET TO INCLUDE ANY NEW SCRIPT IN SCRIPT-MERGE.JSON -->
  {% end %}
  
  {# The template to display files available for upload #}
  <script id="template-upload" type="text/x-tmpl">
    <tr class="template-upload{{!if error}} ui-state-error{{!/if}}" id="files_list">
      <td class="preview" style="width:50px;"><span class="fade"></span></td>
      <td class="name" style="width:400px;word-break:break-all;">${name}(${sizef})
      {{!if name.split('.').pop().toLowerCase() == 'doc' || name.split('.').pop().toLowerCase() == 'docx' ||
      name.split('.').pop().toLowerCase() == 'ppt' || name.split('.').pop().toLowerCase() == 'pptx' || name.split('.').pop().toLowerCase() == 'txt'}}
        <div style="font-size: 11px; line-height:10px; color: #F77D46;width:390px;word-break:break-word;">Document will be converted to PDF, there might be minor loss in fidelity. Original is always available for download, if required.</div>
      {{!/if}}
      </td>
      {{!if error}}
        <td class="error" colspan="2"><span class="label label-important">Error:</span>
          {{!if error === 'maxFileSize'}}File is too big
          {{!else error === 'minFileSize'}}File is too small
          {{!else error === 'acceptFileTypes'}}File type not allowed
          {{!else error === 'maxNumberOfFiles'}}Max number of files exceeded
          {{!else}}${error}
          {{!/if}}
        </td>
      {{!else}}
        <td class="start" style="width:125px;">
            <button class="btn btn-primary"><i class="icon-upload icon-white"></i>Upload</button>
            <div class="progress progress-striped active" style="height:15px;width:120px;display:none;"><div class="bar" style="width:100%;"></div></div>
            <div class="upload_status" style="color:#468847;display:none;font-size:14px;">Uploaded</div>
        </td>
      {{!/if}}
      <td class="cancel" style="width:100px;"><button class="btn btn-warning"><i class="icon-ban-circle icon-white"></i>Cancel</button></td>
    </tr>
  </script>
  
  <script id="template-download" type="text/x-jquery-tmpl">
    <tr class="template-download{{!if error}} ui-state-error{{!/if}}">
      {{!if error}}
        <td></td>
        <td class="name">${name}</td>
        <td class="size">${sizef}</td>
        <td class="error" colspan="2"><span class="label label-important">Error:</span>  
          {{!if error === 1}}File exceeds upload_max_filesize (php.ini directive)
          {{!else error === 2}}File exceeds MAX_FILE_SIZE (HTML form directive)
          {{!else error === 3}}File was only partially uploaded
          {{!else error === 4}}No File was uploaded
          {{!else error === 5}}Missing a temporary folder
          {{!else error === 6}}Failed to write file to disk
          {{!else error === 7}}File upload stopped by extension
          {{!else error === 'maxFileSize'}}File is too big
          {{!else error === 'minFileSize'}}File is too small
          {{!else error === 'acceptFileTypes'}}File type not allowed
          {{!else error === 'maxNumberOfFiles'}}Max number of files exceeded
          {{!else error === 'uploadedBytes'}}Uploaded bytes exceed file size
          {{!else error === 'emptyResult'}}Empty file upload result
          {{!else error === true}}Currently server is down. Please try uploading after sometime. 
          {{!else}}${error}
          {{!/if}}
        </td>
      {{!else}}
        <td class="preview">
          {{!if thumbnail_url}}
            <a href="${url}" target="_blank"><img src="${thumbnail_url}"></a>
          {{!/if}}
        </td>
        <td class="name">
          <a href="${url}"{{!if thumbnail_url}} target="_blank"{{!/if}}>${name}</a>
        </td>
        <td class="size">${sizef}</td>
        <td colspan="3"></td>
      {{!/if}}
    </tr>
  </script>

{% end %}
